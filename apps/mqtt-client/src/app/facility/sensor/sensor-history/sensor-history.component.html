<ng-container *ngIf="history$ | async as history">
  <ngx-charts-line-chart
    *ngIf="history && history.length; else noHistory"
    [view]="[700, 300]"
    [xAxis]="true"
    [yAxis]="true"
    [results]="history"
    [yScaleMin]="min$ | async"
    [yScaleMax]="max$ | async"
    [xAxisTickFormatting]="formatXAxis"
    [yAxisTickFormatting]="formatYAxis"
    [curve]="curve"
    [yAxisTicks]="yAxisTicks"
    [timeline]="true"
  >
    <ng-template #tooltipTemplate let-model="model">
      <div>{{model.name | date:'dd.MM. HH:mm'}} Uhr</div>
      <div>{{model.value | number:'1.1-1'}}{{this.suffix}}</div>
    </ng-template>

    <ng-template #seriesTooltipTemplate let-model="model">
      <ng-container *ngIf="model[0] as item">
        <div>{{item.name | date:'dd.MM. HH:mm'}} Uhr</div>
        <div>{{item.value | number:'1.1-1'}}{{this.suffix}}</div>
      </ng-container>
    </ng-template>
  </ngx-charts-line-chart>
</ng-container>
<ng-template #noHistory>Keine Eintr√§ge vorhanden</ng-template>

<button mat-icon-button (click)="reloadHistory()"><mat-icon>update</mat-icon></button>